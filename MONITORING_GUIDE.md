# üö® –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ª–æ–≥–æ–≤

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö –±–æ—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ Cursor –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
```bash
python3 start_monitor.py
```

### 2. –ó–∞–ø—É—Å–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```bash
python3 log_monitor.py --log-file bot.log --interval 30 --cursor-url YOUR_CURSOR_API_URL
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å –±–æ—Ç–æ–º
–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ `webhook_server.py`

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# URL –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—à–∏–±–æ–∫ –≤ Cursor
export CURSOR_API_URL="https://your-cursor-api.com/errors"

# –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ .env —Ñ–∞–π–ª
CURSOR_API_URL=https://your-cursor-api.com/errors
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ monitor_config.py
```python
MONITOR_CONFIG = {
    "log_file": "bot.log",
    "check_interval": 30,
    "cursor_api_url": os.getenv('CURSOR_API_URL'),
    # ... –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
}
```

## üîç –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫
- ‚ùå **Critical** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- üö® **Exception** - –ò—Å–∫–ª—é—á–µ–Ω–∏—è Python
- ‚ö†Ô∏è **Error** - –û–±—ã—á–Ω—ã–µ –æ—à–∏–±–∫–∏
- üí¨ **User Error** - –û—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞
- `ERROR.*`
- `CRITICAL.*`
- `Exception.*`
- `Traceback.*`
- `Failed.*`
- `‚ùå.*`
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ...

### –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `NotOpenSSLWarning.*`
- `DeprecationWarning.*`
- `UserWarning.*`
- `INFO.*`
- `DEBUG.*`

## üìä –û—Ç—á–µ—Ç—ã

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
–û—Ç—á–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `error_reports/`:
```
error_reports/
‚îú‚îÄ‚îÄ error_report_20240812_143022.txt
‚îú‚îÄ‚îÄ error_report_20240812_143156.txt
‚îî‚îÄ‚îÄ ...
```

### –§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞
```
üö® –û–¢–ß–ï–¢ –û–ë –û–®–ò–ë–ö–ï
==================
üìÖ –í—Ä–µ–º—è: 2024-08-12 14:30:22
üîç –¢–∏–ø: Exception
üìÅ –§–∞–π–ª: bot.log

‚ùå –û—à–∏–±–∫–∞:
2024-08-12 14:30:22,123 - ERROR - Connection failed

üìã –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:
2024-08-12 14:30:22,123 - ERROR - Connection failed
2024-08-12 14:30:22,124 - ERROR - Retrying...

üõ†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

‚è∞ –û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2024-08-12 14:30:22
```

## üîß –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Cursor

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
```json
{
  "type": "error_report",
  "timestamp": "2024-08-12T14:30:22.123456",
  "error_data": {
    "timestamp": "2024-08-12 14:30:22",
    "error_type": "Exception",
    "main_error": "Connection failed",
    "full_context": "...",
    "log_file": "bot.log"
  },
  "request": "auto_fix",
  "context": {
    "project": "telegram-chat-analyzer-bot",
    "files": [
      "webhook_server.py",
      "database.py",
      "message_collector.py",
      "text_analyzer.py",
      "report_generator.py",
      "conversation_analyzer.py",
      "task_manager.py",
      "timezone_utils.py"
    ],
    "priority": "high"
  }
}
```

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ—à–∏–±–æ–∫

| –¢–∏–ø –æ—à–∏–±–∫–∏ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----------|----------|
| Critical | high | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ |
| Exception | high | –ò—Å–∫–ª—é—á–µ–Ω–∏—è Python |
| Error | medium | –û–±—ã—á–Ω—ã–µ –æ—à–∏–±–∫–∏ |
| User Error | low | –û—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| Unknown | medium | –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
‚îú‚îÄ‚îÄ log_monitor.py          # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ monitor_config.py       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ start_monitor.py        # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ MONITORING_GUIDE.md     # –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
‚îú‚îÄ‚îÄ error_reports/          # –ü–∞–ø–∫–∞ —Å –æ—Ç—á–µ—Ç–∞–º–∏
‚îî‚îÄ‚îÄ bot.log                 # –õ–æ–≥ —Ñ–∞–π–ª –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
python3 start_monitor.py

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
python3 log_monitor.py --log-file bot.log --interval 60

# –í —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
nohup python3 start_monitor.py > monitor.log 2>&1 &
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep log_monitor

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
kill -TERM <PID>

# –ò–ª–∏ Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç—á–µ—Ç—ã
ls -la error_reports/

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞
cat error_reports/error_report_20240812_143022.txt

# –ü–æ–∏—Å–∫ –ø–æ –æ—à–∏–±–∫–∞–º
grep -r "Connection failed" error_reports/
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `webhook_server.py`:

```python
# –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ CloudChatAnalyzerBot
self.log_monitor = LogMonitor(log_file="bot.log")
self.monitor_thread = threading.Thread(target=self._start_log_monitoring, daemon=True)
self.monitor_thread.start()
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Cursor
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –æ—Ç—á–µ—Ç–æ–≤

### –õ–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
tail -f monitor.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ
grep "ERROR" monitor.log
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ `bot.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

### –û—à–∏–±–∫–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Cursor
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `CURSOR_API_URL`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç URL

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–æ–≤
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `max_reports_per_hour` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ `ignored_patterns`
3. –£–≤–µ–ª–∏—á—å—Ç–µ `check_interval`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
2. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç—á–µ—Ç—ã –≤ `error_reports/`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `monitor_config.py`
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

**üéØ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!**
